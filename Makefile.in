MAKE = @MAKECMD@
prefix	?= @prefix@
exec_prefix	= @exec_prefix@
TARGETBIN	?= @bindir@


all: dstress udppingpong

install: dstress udppingpong
	cp dstress/dstress $(TARGETBIN)
	cp UdpPingPong/pingpong_sender $(TARGETBIN)
	cp UdpPingPong/pingpong_bouncer $(TARGETBIN)
	
	
uninstall:
	rm -rf $(TARGETBIN)/dstress
	rm -rf $(TARGETBIN)/pingpong_sender
	rm -rf $(TARGETBIN)/pingpong_bouncer

ppl7/release/libppl7.a: ppl7/Makefile
	cd ppl7; $(MAKE)

CommonLib/build/libdnsperftest.a: ppl7/release/libppl7.a CommonLib/Makefile
	cd CommonLib; $(MAKE)

	
dstress: ppl7/release/libppl7.a  CommonLib/build/libdnsperftest.a dstress/Makefile
	cd dstress; $(MAKE)

udppingpong: ppl7/release/libppl7.a  CommonLib/build/libdnsperftest.a UdpPingPong/Makefile
	cd UdpPingPong; $(MAKE)




clean:
	rm -rf ppl7/release
	cd CommonLib; $(MAKE) clean
	cd UdpPingPong; $(MAKE) clean
	cd dstress; $(MAKE) clean
	cd Agent; $(MAKE) clean
	cd Cli; $(MAKE) clean
